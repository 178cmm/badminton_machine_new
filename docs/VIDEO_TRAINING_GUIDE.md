# 影片訓練功能使用指南

## 概述

基礎訓練模組現在支持教學影片播放功能，讓用戶在選擇訓練項目時可以觀看對應的教學影片，更好地理解技術要點。

## 功能特點

### 1. 影片播放器
- **播放控制**：支持播放、暫停、停止
- **進度控制**：可拖拽進度條跳轉到指定位置
- **時間顯示**：顯示當前播放時間和總時長
- **狀態提示**：顯示播放狀態和載入信息

### 2. 影片配置管理
- **自動映射**：訓練項目與影片文件自動關聯
- **文件檢查**：自動檢查影片文件是否存在
- **靈活配置**：可輕鬆添加新的影片映射

### 3. 用戶界面
- **分割布局**：左側顯示項目說明，右側播放影片
- **響應式設計**：支持調整分割器比例
- **無影片提示**：當沒有對應影片時顯示友好提示

## 使用方法

### 1. 查看訓練項目
1. 啟動應用程序
2. 點擊「基礎訓練」標籤
3. 選擇任意訓練項目（如「正手高遠球」）

### 2. 觀看教學影片
1. 在彈出的訓練設置對話框中
2. 右側會自動載入對應的教學影片
3. 使用播放控制按鈕操作影片
4. 可拖拽進度條跳轉到感興趣的部分

### 3. 設置訓練參數
1. 在左側查看項目說明
2. 選擇訓練速度（慢/正常/快/極限快）
3. 選擇發球數量（10顆/20顆/30顆）
4. 點擊「開始發球」開始訓練

## 影片文件管理

### 當前支持的影片
- **正手高遠球**：`2-1正手高遠球_v03.mp4`

### 添加新影片
1. 將影片文件放在項目根目錄
2. 在 `core/utils/video_config.py` 中添加映射：
   ```python
   self.video_mapping = {
       "正手高遠球": "2-1正手高遠球_v03.mp4",
       "反手高遠球": "反手高遠球.mp4",  # 新增
       # ... 其他項目
   }
   ```

### 影片文件要求
- **格式**：支持 MP4、AVI、MOV 等常見格式
- **位置**：放在項目根目錄
- **命名**：建議使用描述性文件名

## 技術實現

### 核心組件
1. **VideoPlayer** (`gui/video_player.py`)：影片播放器組件
2. **VideoConfig** (`core/utils/video_config.py`)：影片配置管理器
3. **UI集成** (`gui/ui_training.py`)：基礎訓練UI集成

### 依賴項
- PyQt5.QtMultimedia：影片播放支持
- PyQt5.QtMultimediaWidgets：影片顯示組件

## 故障排除

### 常見問題

1. **影片無法播放**
   - 檢查影片文件是否存在
   - 確認影片格式是否支持
   - 查看控制台錯誤信息
   - **解決方案**：如果遇到 "No decoder available" 錯誤，請使用 ffmpeg 轉換影片格式：
     ```bash
     # 轉換為 MKV 格式（推薦，兼容性最好）
     ffmpeg -i "原影片.mp4" -c:v libx264 -c:a aac -f matroska "新影片.mkv"
     
     # 轉換為 AVI 格式
     ffmpeg -i "原影片.mp4" -c:v mpeg4 -c:a mp3 -f avi "新影片.avi"
     
     # 轉換為兼容的 MP4 格式
     ffmpeg -i "原影片.mp4" -c:v libx264 -c:a aac -movflags +faststart "新影片.mp4"
     ```

2. **影片載入失敗**
   - 檢查文件路徑是否正確
   - 確認文件權限
   - 檢查磁盤空間

3. **播放器界面異常**
   - 重啟應用程序
   - 檢查PyQt5版本兼容性

4. **GStreamer 插件缺失**
   - 錯誤信息：`"Your GStreamer installation is missing a plug-in"`
   - **解決方案**：安裝 GStreamer 插件（推薦）：
     ```bash
     brew install gstreamer gst-plugins-base gst-plugins-good gst-plugins-bad gst-plugins-ugly gst-libav
     ```
   - 或轉換影片為兼容格式（備選方案）

### 調試方法
1. 查看控制台輸出
2. 檢查影片文件完整性
3. 測試其他影片文件

## 未來擴展

### 計劃功能
- [ ] 支持更多影片格式
- [ ] 添加影片縮略圖預覽
- [ ] 支持影片播放速度調整
- [ ] 添加影片書籤功能
- [ ] 支持全屏播放模式

### 建議改進
- 影片文件集中管理
- 支持在線影片流
- 添加影片評分和評論功能
- 支持多語言字幕

## 聯繫支持

如果在使用過程中遇到問題，請：
1. 查看本文檔的故障排除部分
2. 檢查控制台錯誤信息
3. 聯繫開發團隊獲取支持
